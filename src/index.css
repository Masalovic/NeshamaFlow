@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---- Color scheme hint (helps form controls, scrollbar, etc.) ------- */
:root { color-scheme: light; }
[data-appearance="dark"] { color-scheme: dark; }
 
/* ---- App base -------------------------------------------------------- */
html, body {
  min-height: 100%;
  background: var(--bg);
  color: var(--text);
  font-family: 'Outfit', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial;
}

/* ---- Cards & tiles (shared across pages) ----------------------------- */
.card {
  @apply rounded-2xl shadow-soft border p-4;
  background: var(--surface-1);
  border-color: var(--border);
  color: var(--text);
}
.tile {
  @apply p-4 flex items-start gap-3 rounded-2xl shadow-soft border;
  background: var(--surface-1);
  border-color: var(--border);
  color: var(--text);
}

/* Small chips / pills / badges (stats, filters, etc.) */
.chip, .pill, .badge, .segment {
  background: var(--surface-2);
  border: 1px solid var(--border);
  color: var(--text-dim);
  border-radius: 9999px;
}

/* ---- Inputs (shared) ------------------------------------------------- */
.input,
input[type="text"],
input[type="number"],
input[type="time"],
input[type="password"],
input[type="email"],
textarea,
select {
  background: var(--surface-2) !important;
  color: var(--text) !important;         /* ✅ readable in dark */
  border: 1px solid var(--border) !important;
  border-radius: 0.75rem;
  padding: 0.75rem 1rem;
  outline: none;
  caret-color: var(--accent-600);
}
.input::placeholder,
textarea::placeholder { color: var(--text-muted); }

/* token-based focus ring (works in light/dark) */
.input:focus,
textarea:focus,
select:focus {
  border-color: var(--accent-400);
  box-shadow: 0 0 0 2px var(--accent-400);
}

/* ---- Buttons --------------------------------------------------------- */
.btn {
  @apply inline-flex items-center justify-center h-12 px-5 rounded-pill text-sm font-semibold transition select-none outline-none disabled:opacity-45 disabled:cursor-not-allowed;
  box-shadow: var(--elev, 0 0 0 rgba(0,0,0,0));
}

/* Primary – uses theme.ts contrast tokens */
.btn-primary {
  background: var(--primary-bg);
  color: var(--primary-fg);              /* black in light, white in dark */
}
.btn-primary:hover  { background: var(--primary-bg-hover); }
.btn-primary:active { background: var(--primary-bg-active); box-shadow: inset 0 2px 6px rgba(0,0,0,.25); }

/* Secondary – subtle surface */
.btn-secondary {
  background: var(--surface-1);
  color: var(--text);
  border: 1px solid var(--border);
}
.btn-secondary:hover { background: var(--surface-2); }

/* Outline – neutral with accent border */
.btn-outline {
  background: transparent;
  color: var(--text);
  border: 1px solid var(--accent-300);
}
.btn-outline:hover { background: var(--hover); }

/* Small pill CTA inside tiles/cards (e.g. Ritual list “Start”) */
.tile .btn-primary,
.btn-chip {
  background: var(--primary-bg);
  color: #fff;                           /* keep white for punchy pills */
  height: 40px;
  padding-inline: 16px;
}

/* ---- Bottom nav ------------------------------------------------------ */
:root { --nav-height: 64px; }
.safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
.screen .overflow-y-auto,
.min-h-\[100svh\] .overflow-y-auto {
  padding-bottom: calc(var(--nav-height) + env(safe-area-inset-bottom));
}
.safe-bottom-shadow { box-shadow: 0 -6px 16px rgba(15,15,16,0.06); }
.bottom-nav { background: var(--nav-bg) !important; color: var(--text-dim); }

/* ---- Utilities that respect tokens ---------------------------------- */
.text-dim   { color: var(--text-dim); }
.text-muted { color: var(--text-muted); }
.border-token { border-color: var(--border); }
.shadow-soft { box-shadow: 0 12px 28px rgba(0,0,0,.12); }

/* Keyboard focus */
:focus-visible {
  outline: 2px solid var(--accent-500);
  outline-offset: 2px;
  border-radius: 10px;
}

/* === Token utilities (semantic colors) ===================================
@layer utilities {
  .bg-app        { background: var(--bg) !important; }
  .bg-surface-1  { background: var(--surface-1) !important; }
  .bg-surface-2  { background: var(--surface-2) !important; }
  .bg-nav        { background: var(--nav-bg) !important; }

  .text-main     { color: var(--text) !important; }
  .text-dim      { color: var(--text-dim) !important; }
  .text-muted    { color: var(--text-muted) !important; }

  .border-token  { border-color: var(--border) !important; }

  /* Accent text helper (for links etc.) */
  /* .text-accent        { color: rgb(var(--accent-600)) !important; }
  .text-accent:hover  { color: rgb(var(--accent-700)) !important; }
}  */
