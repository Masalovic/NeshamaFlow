/* index.css (additions near the end are marked) */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---- Color scheme hint (helps form controls, scrollbar, etc.) ------- */
:root { color-scheme: light; }
[data-appearance="dark"] { color-scheme: dark; }

/* ---- App base -------------------------------------------------------- */
html, body, #root { min-height: 100%; }
body {
  min-height: 100%;
  background: var(--bg);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  color: var(--text);
  font-family: "Outfit", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial;
}

/* ---- Cards & tiles (shared across pages) ----------------------------- */
.card { @apply rounded-2xl shadow-soft border p-4; background: var(--surface-1); border-color: var(--border); color: var(--text); }
.tile { @apply p-4 flex items-start gap-3 rounded-2xl shadow-soft border; background: var(--surface-1); border-color: var(--border); color: var(--text); }

/* Small chips / pills / badges (stats, filters, etc.) */
.chip, .pill, .badge, .segment {
  background: var(--surface-2);
  border: 1px solid var(--border);
  color: var(--text-dim);
  border-radius: 9999px;
}

/* ---- Inputs (shared) ------------------------------------------------- */
.input,
input[type="text"], input[type="number"], input[type="time"],
input[type="password"], input[type="email"], textarea, select {
  background: var(--surface-2) !important;
  color: var(--text) !important;
  border: 1px solid var(--border) !important;
  border-radius: 0.75rem;
  padding: 0.25rem 1rem;
  outline: none;
  caret-color: var(--accent-600);
}
.input::placeholder, textarea::placeholder { color: var(--text-muted); }
.input:focus, textarea:focus, select:focus {
  border-color: var(--accent-400);
  box-shadow: 0 0 0 2px var(--accent-400);
}

/* ---- Progress ring tokens ------------------------------------------- */
.ring-track    { stroke: var(--ring-text); }
.ring-progress { stroke: var(--ring-progress); }
.ring-text     { fill:   var(--ring-text); }

/* ---- Buttons --------------------------------------------------------- */
.btn {
  @apply inline-flex items-center justify-center rounded-pill text-sm font-normal transition select-none outline-none disabled:opacity-45 disabled:cursor-not-allowed;
  height: 40px;
  padding-inline: 14px;
  width: auto;
  white-space: nowrap;
  box-shadow: var(--elev, 0 0 0 rgba(0,0,0,0));
}
.btn-primary { background: var(--accent-500); height: 34px; }
.btn-primary:hover  { background: var(--primary-bg-hover); }
.btn-primary:active { background: var(--primary-bg-active); box-shadow: inset 0 2px 6px rgba(0,0,0,0.25); }

.btn-secondary {
  background: var(--surface-2);
  height: 34px;
  border: 1px solid var(--border);
  color: var(--text);
}
.btn-secondary:hover { background: var(--hover); }
.btn-secondary small { color: inherit; opacity: .85; line-height: 1; }

.btn-full { width: 100%; }
@supports (width: -webkit-fill-available) { .btn-full { width: -webkit-fill-available; } }
@supports (width: stretch) { .btn-full { width: stretch; } }

.btn-outline { background: transparent; height: 34px; border: 1px solid var(--accent-400); }
.btn-outline:hover { background: color-mix(in oklab, var(--accent-400) 12%, transparent); }
@supports not (background: color-mix(in oklab, white 10%, black)) {
  .btn-outline:hover { background: rgba(0,0,0,0.04); }
}

.btn-ghost { background: transparent; color: var(--text); }
.btn-ghost:hover { background: var(--hover); }

[data-appearance="dark"] .btn-secondary { background: #232328; border-color: #5a5f69; }
[data-appearance="dark"] .btn-outline   { border-color: var(--accent-300); }
[data-appearance="dark"] .btn-outline:hover { background: rgba(255,255,255,0.06); }

.is-active { color: var(--accent-600); }
[data-appearance="dark"] .is-active { color: var(--accent-300); }

.tile .btn-primary, .btn-chip { background: var(--primary-bg); color: #fff; }

/* ---- Bottom nav ------------------------------------------------------ */
:root { --nav-height: 64px; }
.safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
.screen .overflow-y-auto, .min-h-\[100svh\] .overflow-y-auto { padding-bottom: calc(var(--nav-height) + env(safe-area-inset-bottom)); }
.safe-bottom-shadow { box-shadow: 0 -6px 16px rgba(15, 15, 16, 0.06); }
.bottom-nav { background: var(--nav-bg) !important; color: var(--text-dim); }
.bottom-nav { background: var(--nav-bg); border-color: var(--border); box-shadow: 0 -6px 16px rgba(15, 15, 16, 0.06); }
.bottom-nav .nav-link { color: var(--text-muted); transition: color .18s ease, background-color .18s ease, transform .04s ease; }
.bottom-nav .nav-link:hover { color: var(--text); }
.bottom-nav .nav-link.active { color: var(--accent-nav); }
.bottom-nav .nav-link:active { color: var(--accent-nav-press); transform: translateY(1px); }
.bottom-nav .nav-link.active .nav-ico { background: rgb(var(--accent-50) / 0.6); border-radius: 10px; padding: 2px; }
[data-appearance="dark"] .bottom-nav .nav-link.active .nav-ico { background: rgb(var(--accent-400) / 0.18); }

/* ---- Utilities that respect tokens ---------------------------------- */
.text-dim   { color: var(--text-dim); }
.text-muted { color: var(--text-muted); }
.border-token { border-color: var(--border); }
.shadow-soft { box-shadow: 0 12px 28px rgba(0,0,0,0.12); }

:focus-visible { outline: 2px solid var(--accent-500); outline-offset: 2px; border-radius: 10px; }

/* === Token utilities (semantic colors) =================================== */
@layer utilities {
  .bg-app       { background: var(--bg) !important; }
  .bg-surface-1 { background: var(--surface-1) !important; }
  .bg-surface-2 { background: var(--surface-2) !important; }
  .bg-nav       { background: var(--nav-bg) !important; }

  .text-main  { color: var(--text) !important; }
  .text-dim   { color: var(--text-dim) !important; }
  .text-muted { color: var(--text-muted) !important; }

  .border-token { border-color: var(--border) !important; }

  .text-accent { color: rgb(var(--accent-600)) !important; }
  .text-accent:hover { color: rgb(var(--accent-700)) !important; }
}

/* ---------- Modal readability helpers (NEW) ---------- */
/* Make small/“muted” text inside modals full-contrast on light & custom */
[data-appearance="light"] .modal-panel .text-xs,
[data-appearance="light"] .modal-panel .text-sm,
[data-appearance="light"] .modal-panel .text-muted,
[data-appearance="light"] .modal-panel .text-dim,
[data-appearance="custom"] .modal-panel .text-xs,
[data-appearance="custom"] .modal-panel .text-sm,
[data-appearance="custom"] .modal-panel .text-muted,
[data-appearance="custom"] .modal-panel .text-dim {
  color: var(--text) !important;
  opacity: 1;
}
